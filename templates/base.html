{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{ title }}</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="shortcut icon" href="{{ dashboard.get_image }}"/>
    
    <link rel="stylesheet" href="{% static 'lib/bootstrap-4.6.0/css/bootstrap.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'lib/fontawesome-6.1.1/css/all.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'lib/jquery-ui-1.12.1/jquery-ui.css' %}"/>
    
    <script src="{% static 'lib/bootstrap-4.6.0/js/jquery.min.js' %}"></script>
    <script src="{% static 'lib/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>
    <script src="{% static 'lib/bootstrap-4.6.0/js/popper.min.js' %}"></script>
    <script src="{% static 'lib/bootstrap-4.6.0/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'lib/adminlte-3.2.0/js/adminlte.min.js' %}"></script>
    
    <link rel="stylesheet" href="{% static 'lib/adminlte-3.2.0/css/adminlte.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/style.css' %}"/>
    
    <style>
        /* 1. SOLUCIÓN AL FONDO AZUL: Se elimina en todo el dashboard */
        body:not(.login-page) {
            background-image: none !important;
            background-color: #f4f6f9 !important;
        }

        /* 2. REGLAS PARA COMPUTADORA (PC) */
        @media (min-width: 992px) {
            /* Si el sistema está en Vertical, respetamos el margen del sidebar */
            body:not(.layout-top-nav) .main-header, 
            body:not(.layout-top-nav) .content-wrapper {
                margin-left: 250px !important;
            }
            /* Si el sistema está en Horizontal, el margen es 0 */
            body.layout-top-nav .content-wrapper {
                margin-left: 0 !important;
            }
        }

        /* 3. REGLAS PARA CELULAR (MOVIL) */
        @media (max-width: 991px) {
            /* FORZAMOS COMPORTAMIENTO VERTICAL EN CELULAR: 
               Incluso si en PC está horizontal, en celular el header ocupará todo el ancho */
            .main-header {
                margin-left: 0 !important;
                width: 100% !important;
                display: flex !important;
                position: relative !important;
            }

            .content-wrapper {
                margin-left: 0 !important;
                width: 100% !important;
            }

            /* Ocultamos los textos que causan que el header se corte */
            .main-header .nav-link p, 
            .main-header .nav-link span:not(.badge),
            .navbar-nav label {
                display: none !important;
            }

            .navbar-nav {
                flex-direction: row !important;
            }
            
            .nav-item {
                padding: 0 4px;
            }
        }
    </style>

    <script src="{% static 'lib/bootstrap-daterangepicker-3.1/js/moment.min.js' %}"></script>
    <script src="{% static 'lib/bootstrap-daterangepicker-3.1/js/moment-with-locales.js' %}"></script>
    <script src="{% static 'lib/jquery-confirm-3.3.4/js/jquery-confirm.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'lib/jquery-confirm-3.3.4/css/jquery-confirm.min.css' %}"/>
    <script src="{% static 'lib/sweetalert2-11.0.16/js/sweetalert2.all.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'lib/sweetalert2-11.0.16/css/sweetalert2.min.css' %}"/>
    <script src="{% static 'lib/jquery-loading-overlay-2.1.7/js/loadingoverlay.min.js' %}"></script>
    <script src="{% static 'js/functions.js' %}"></script>
    
    {% block head %}{% endblock %}
</head>

<body class="hold-transition sidebar-mini layout-fixed">
    <div class="wrapper">
        {% block body %}
        {% endblock %}
    </div>
    <script src="{% static 'js/main.js' %}"></script>
</body>
</html>